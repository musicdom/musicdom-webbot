<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –î–æ–º ‚Äî –í–∞—à–∞ –ø–µ—Å–Ω—è</title>
  <style>
    /* –ó–∏–º–Ω–∏–π —Å—Ç–∏–ª—å —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–æ–¥–º–µ—Ä–∑—à–µ–≥–æ —Å—Ç–µ–∫–ª–∞ */
    * {margin: 0; padding: 0; box-sizing: border-box;}
    body {
      height: 100vh;
      font-family: 'Inter', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #3a6ea5, #5a8ec9, #7baedc, #9cc9eb);
      background-size: 400% 400%;
      animation: gradientMove 20s ease infinite;
      color: white;
      overflow: hidden;
      position: relative;
      text-align: center;
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É */
    .snowflakes {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    /* –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å–Ω–µ–∂–∏–Ω–∫–∏ */
    .snowflake {
      position: absolute;
      top: -10px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1em;
      animation: snowFall linear infinite;
      user-select: none;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
    }
    
    @keyframes snowFall {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) translateX(20px) rotate(360deg);
        opacity: 0;
      }
    }
    
    @keyframes gradientMove {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    /* –£–ª—É—á—à–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —Å—Ç–µ–∫–ª–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      padding: 40px 30px;
      margin: 20px;
      max-width: 500px;
      width: 90%;
      box-shadow: 
        0 0 30px rgba(255,255,255,0.1),
        inset 0 0 20px rgba(255,255,255,0.05);
      animation: fadeIn 0.8s ease-in-out;
      position: relative;
      z-index: 3;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
    }
    
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(20px);}
      to {opacity: 1; transform: translateY(0);}
    }

    h2 {
      margin-bottom: 15px;
      font-size: 1.8rem;
      color: white;
      text-shadow: 0 0 15px rgba(255,255,255,0.5);
    }

    p {
      margin-bottom: 25px;
      opacity: 0.9;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      color: white;
      text-shadow: 0 0 10px rgba(255,255,255,0.3);
    }

    audio {
      width: 100%;
      max-width: 400px;
      margin: 20px 0;
      border-radius: 10px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
    }

    /* –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤ —Å—Ç–∏–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    .download-button {
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.25);
      color: white;
      font-size: 1.1rem;
      padding: 15px 35px;
      margin: 15px 0;
      border-radius: 40px;
      backdrop-filter: blur(20px);
      box-shadow: 
        0 0 25px rgba(255,255,255,0.15),
        inset 0 0 20px rgba(255,255,255,0.05);
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      z-index: 10;
    }

    .download-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .download-button:hover {
      background: rgba(255, 255, 255, 0.18);
      box-shadow: 
        0 0 30px rgba(255,255,255,0.25),
        inset 0 0 20px rgba(255,255,255,0.1);
      transform: scale(1.03);
    }

    .download-button:hover::before {
      left: 100%;
    }

    footer {
      margin-top: 25px;
      font-size: 0.9rem;
      opacity: 0.7;
      color: white;
      text-shadow: 0 0 10px rgba(255,255,255,0.3);
    }

    /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –º—É–∑—ã–∫–∏ */
    .music-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(20px);
      box-shadow: 
        0 0 15px rgba(255,255,255,0.15),
        inset 0 0 10px rgba(255,255,255,0.05);
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .music-toggle:hover {
      background: rgba(255, 255, 255, 0.25);
      box-shadow: 
        0 0 20px rgba(255,255,255,0.25),
        inset 0 0 10px rgba(255,255,255,0.1);
      transform: scale(1.1);
    }

    /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º—É–∑—ã–∫–µ */
    .music-notification {
      position: fixed;
      top: 80px;
      right: 20px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(20px);
      box-shadow: 
        0 0 15px rgba(255,255,255,0.15),
        inset 0 0 10px rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 10px 15px;
      color: white;
      font-size: 0.9rem;
      z-index: 999;
      animation: fadeInOut 4s forwards;
      max-width: 200px;
    }
    
    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(-10px); }
      20% { opacity: 1; transform: translateY(0); }
      80% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-10px); }
    }
  </style>
</head>
<body>
  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É -->
  <div class="snowflakes" id="snowflakes"></div>

  <!-- –≠–ª–µ–º–µ–Ω—Ç –∞—É–¥–∏–æ –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏ -->
  <audio id="backgroundMusic" loop>
    <source src="song/background.mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
  </audio>

  <div class="music-toggle" id="musicToggle" onclick="toggleMusic()">üîá</div>

  <div class="card">
    <h2>‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É!</h2>
    <p>–í–∞—à–∞ –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–µ—Å–Ω–∏ –≥–æ—Ç–æ–≤–∞ üéµ</p>

    <div id="playerBox"></div>

    <footer>–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –î–æ–º ¬© 2025</footer>
  </div>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫ - –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
    function createSnowflakes() {
      const snowflakesContainer = document.getElementById('snowflakes');
      const snowflakeSymbols = ['‚ùÖ', '‚ùÜ', '‚ùÑ', '‚Ä¢'];
      const snowflakeCount = 60;
      
      // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
      snowflakesContainer.innerHTML = '';
      
      for (let i = 0; i < snowflakeCount; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakeSymbols[Math.floor(Math.random() * snowflakeSymbols.length)];
        
        // –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Å–Ω–µ–∂–∏–Ω–∫–∏
        const left = Math.random() * 100;
        const animationDuration = 5 + Math.random() * 15; // –†–∞–∑–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
        const animationDelay = Math.random() * 5;
        const fontSize = 8 + Math.random() * 15; // –†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
        
        snowflake.style.left = `${left}%`;
        snowflake.style.animationDuration = `${animationDuration}s`;
        snowflake.style.animationDelay = `${animationDelay}s`;
        snowflake.style.fontSize = `${fontSize}px`;
        snowflake.style.opacity = Math.random() * 0.7 + 0.3;
        
        snowflakesContainer.appendChild(snowflake);
      }
    }

    // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏ —Å—Ä–∞–∑—É –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞
    createSnowflakes();

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π
    let isBackgroundMusicPlaying = false;
    let wasBackgroundMusicPlaying = false;
    let autoPlayFailed = false;

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –º—É–∑—ã–∫–µ
    function showMusicNotification(message, isError = false) {
      // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
      const existingNotification = document.querySelector('.music-notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      const notification = document.createElement('div');
      notification.className = 'music-notification';
      if (isError) {
        notification.style.background = 'rgba(239, 68, 68, 0.2)';
        notification.style.border = '1px solid rgba(239, 68, 68, 0.4)';
      }
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
      setTimeout(() => {
        if (notification.parentNode) {
          notification.remove();
        }
      }, 4000);
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏
    function toggleMusic() {
      const backgroundMusic = document.getElementById('backgroundMusic');
      const musicToggle = document.getElementById('musicToggle');
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∞ 30% –ø–µ—Ä–µ–¥ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º
      backgroundMusic.volume = 0.3;
      
      if (backgroundMusic.paused) {
        backgroundMusic.play().then(() => {
          musicToggle.textContent = 'üéµ';
          isBackgroundMusicPlaying = true;
          autoPlayFailed = false;
          showMusicNotification('–ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ üéµ');
        }).catch(error => {
          console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', error);
          musicToggle.textContent = 'üîá';
          isBackgroundMusicPlaying = false;
          showMusicNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ üîß', true);
        });
      } else {
        backgroundMusic.pause();
        musicToggle.textContent = 'üîá';
        isBackgroundMusicPlaying = false;
        showMusicNotification('–ú—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞ üîá');
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏
    function autoPlayMusic() {
      const backgroundMusic = document.getElementById('backgroundMusic');
      const musicToggle = document.getElementById('musicToggle');
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∞ 30%
      backgroundMusic.volume = 0.3;
      
      // –ü—ã—Ç–∞–µ–º—Å—è –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      backgroundMusic.play().then(() => {
        musicToggle.textContent = 'üéµ';
        isBackgroundMusicPlaying = true;
        autoPlayFailed = false;
      }).catch(error => {
        // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –±—Ä–∞—É–∑–µ—Ä–æ–º
        console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É –≤—Ä—É—á–Ω—É—é.');
        musicToggle.textContent = 'üîá';
        isBackgroundMusicPlaying = false;
        autoPlayFailed = true;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –º—É–∑—ã–∫–∏
        setTimeout(() => {
          showMusicNotification('–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º—É–∑—ã–∫–∏ üéµ', true);
        }, 1000);
      });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–æ–π –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö –∞—É–¥–∏–æ
    function setupAudioControl(audioElement) {
      const backgroundMusic = document.getElementById('backgroundMusic');
      
      audioElement.addEventListener('play', function() {
        if (isBackgroundMusicPlaying) {
          backgroundMusic.pause();
          wasBackgroundMusicPlaying = true;
        }
      });

      audioElement.addEventListener('pause', function() {
        if (wasBackgroundMusicPlaying && !this.ended) {
          backgroundMusic.play();
          wasBackgroundMusicPlaying = false;
        }
      });

      audioElement.addEventListener('ended', function() {
        if (wasBackgroundMusicPlaying) {
          backgroundMusic.play();
          wasBackgroundMusicPlaying = false;
        }
      });
    }

    // –ü–æ–ª—É—á–∞–µ–º –∫–æ–¥ –ø–µ—Å–Ω–∏ –∏–∑ URL –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–ª–µ–µ—Ä
    const url = new URL(window.location.href);
    const code = url.searchParams.get('code');

    if (code) {
      const songPath = `song/song${code}_full.mp3`;
      document.getElementById("playerBox").innerHTML = `
        <audio id="songPlayer" controls autoplay>
          <source src="${songPath}" type="audio/mpeg">
          –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ-–ø–ª–µ–µ—Ä.
        </audio>
        <br>
        <a href="${songPath}" download class="download-button">
          ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –ø–µ—Å–Ω—é
        </a>
      `;
      
      // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –¥–ª—è –ø–µ—Å–Ω–∏
      setTimeout(() => {
        const songPlayer = document.getElementById('songPlayer');
        setupAudioControl(songPlayer);
      }, 100);
    } else {
      document.getElementById("playerBox").innerHTML = "<p>–û—à–∏–±–∫–∞: –∫–æ–¥ –ø–µ—Å–Ω–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω.</p>";
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = function() {
      // –ü—ã—Ç–∞–µ–º—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
      setTimeout(autoPlayMusic, 500);
    };
  </script>
</body>
</html>
